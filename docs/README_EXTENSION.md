# çˆ¬è™«å¹³å°æ‰©å±•æ–¹æ¡ˆ - æ€»è§ˆ

## ğŸ“‹ æ–¹æ¡ˆæ¦‚è¿°

æœ¬é¡¹ç›®å·²å®ç°å¯æ‰©å±•çš„çˆ¬è™«æ¶æ„ï¼Œæ”¯æŒå¿«é€Ÿæ·»åŠ æ–°çš„æ‹›æ ‡å¹³å°ã€‚æ–°å¹³å°åªéœ€å®ç°ï¼š
1. **å¯æ‰§è¡Œè¯·æ±‚å‡½æ•°**ï¼ˆHTTPè¯·æ±‚å¤„ç†ï¼‰
2. **çˆ¬è™«ç±»**ï¼ˆç»§æ‰¿BaseSpiderï¼Œå®ç°run()æ–¹æ³•ï¼‰

å³å¯è‡ªåŠ¨é›†æˆåˆ°ç³»ç»Ÿä¸­ï¼Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç ã€‚

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### 1. **SPIDER_EXTENSION_PLAN.md** - è¯¦ç»†æ–¹æ¡ˆè®¾è®¡
   - æ¶æ„è®¾è®¡
   - æ¥å£å®šä¹‰
   - å®ç°æ–¹æ¡ˆ
   - é…ç½®ç®¡ç†
   - ä½¿ç”¨æ–¹å¼
   - åç»­ä¼˜åŒ–æ–¹å‘

### 2. **PLATFORM_INTEGRATION_TEMPLATE.md** - å®Œæ•´ä»£ç æ¨¡æ¿
   - å¿«é€Ÿå¼€å§‹æ­¥éª¤
   - å¯æ‰§è¡Œè¯·æ±‚å‡½æ•°æ¨¡æ¿
   - å¹³å°é…ç½®æ¨¡æ¿
   - çˆ¬è™«ç±»å®ç°æ¨¡æ¿
   - æ•°æ®æ ¼å¼è¦æ±‚
   - æµ‹è¯•æ£€æŸ¥æ¸…å•

### 3. **SPIDER_EXTENSION_QUICK_START.md** - å¿«é€Ÿå‚è€ƒæŒ‡å—
   - æ ¸å¿ƒç»„ä»¶è¯´æ˜
   - å¿«é€Ÿé›†æˆæ­¥éª¤
   - ä½¿ç”¨æ–¹å¼ç¤ºä¾‹
   - æ³¨æ„äº‹é¡¹

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### âœ… ç»Ÿä¸€æ¥å£
- æ‰€æœ‰çˆ¬è™«ç»§æ‰¿ `BaseSpider` åŸºç±»
- å¿…é¡»å®ç° `run()` æ–¹æ³•
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### âœ… è‡ªåŠ¨æ³¨å†Œ
- ä½¿ç”¨ `@SpiderManager.register` è£…é¥°å™¨è‡ªåŠ¨æ³¨å†Œ
- æˆ–æ‰‹åŠ¨è°ƒç”¨ `SpiderManager.register(SpiderClass)`

### âœ… ç»Ÿä¸€è°ƒåº¦
- `SpiderManager.run_all_spiders()` ç»Ÿä¸€è°ƒåº¦æ‰€æœ‰çˆ¬è™«
- æ”¯æŒæŒ‡å®šå¹³å°åˆ—è¡¨
- æ”¯æŒé…é¢åˆ†é…

### âœ… å‘åå…¼å®¹
- ç°æœ‰ä»£ç æ— éœ€ä¿®æ”¹
- `ZheJiangTenderSpider` è‡ªåŠ¨é€‚é…æ–°æ¶æ„
- `run_all_spiders()` å‡½æ•°ä¿æŒä¸å˜

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. æŸ¥çœ‹å¿«é€ŸæŒ‡å—
é˜…è¯» `docs/SPIDER_EXTENSION_QUICK_START.md` äº†è§£åŸºæœ¬æ¦‚å¿µå’Œæ­¥éª¤

### 2. å‚è€ƒä»£ç æ¨¡æ¿
é˜…è¯» `docs/PLATFORM_INTEGRATION_TEMPLATE.md` è·å–å®Œæ•´ä»£ç æ¨¡æ¿

### 3. å®ç°æ–°å¹³å°
æŒ‰ç…§æ¨¡æ¿å®ç°ï¼š
- `request_handler.py` - å¯æ‰§è¡Œè¯·æ±‚å‡½æ•°
- `config.py` - å¹³å°é…ç½®
- `spider.py` - çˆ¬è™«ç±»

### 4. æ³¨å†Œå¹¶æµ‹è¯•
- åœ¨ `spider/__init__.py` ä¸­å¯¼å…¥æ–°çˆ¬è™«
- è¿è¡Œæµ‹è¯•éªŒè¯åŠŸèƒ½

## ğŸ“ æ–‡ä»¶ç»“æ„

```
spider/
â”œâ”€â”€ __init__.py                 # å¯¼å‡ºæ‰€æœ‰çˆ¬è™«
â”œâ”€â”€ base_spider.py              # åŸºç¡€çˆ¬è™«ç±»ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ spider_manager.py           # çˆ¬è™«ç®¡ç†å™¨ï¼ˆæ–°å¢ï¼‰
â”œâ”€â”€ tender_spider.py            # æµ™æ±Ÿçœçˆ¬è™«ï¼ˆç°æœ‰ï¼Œå·²é‡æ„ï¼‰
â””â”€â”€ platforms/                  # å¹³å°ç›®å½•ï¼ˆæ–°å¢ï¼‰
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ your_platform/          # æ–°å¹³å°ç¤ºä¾‹
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ spider.py           # çˆ¬è™«å®ç°
    â”‚   â”œâ”€â”€ config.py           # å¹³å°é…ç½®
    â”‚   â””â”€â”€ request_handler.py  # å¯æ‰§è¡Œè¯·æ±‚å‡½æ•°
    â””â”€â”€ ...

docs/
â”œâ”€â”€ SPIDER_EXTENSION_PLAN.md           # è¯¦ç»†æ–¹æ¡ˆè®¾è®¡
â”œâ”€â”€ PLATFORM_INTEGRATION_TEMPLATE.md   # å®Œæ•´ä»£ç æ¨¡æ¿
â”œâ”€â”€ SPIDER_EXTENSION_QUICK_START.md    # å¿«é€Ÿå‚è€ƒæŒ‡å—
â””â”€â”€ README_EXTENSION.md                # æœ¬æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### BaseSpiderï¼ˆåŸºç¡€çˆ¬è™«ç±»ï¼‰
- ä½ç½®ï¼š`spider/base_spider.py`
- åŠŸèƒ½ï¼šæä¾›ç»Ÿä¸€æ¥å£å’Œé€šç”¨æ–¹æ³•
- æ–¹æ³•ï¼š`run()`, `get_platform_info()`, `_is_duplicate()`

### SpiderManagerï¼ˆçˆ¬è™«ç®¡ç†å™¨ï¼‰
- ä½ç½®ï¼š`spider/spider_manager.py`
- åŠŸèƒ½ï¼šæ³¨å†Œã€åˆ›å»ºã€è°ƒåº¦çˆ¬è™«
- æ–¹æ³•ï¼š`register()`, `create_spider()`, `run_all_spiders()`

### ZheJiangTenderSpiderï¼ˆæµ™æ±Ÿçœçˆ¬è™«ï¼‰
- ä½ç½®ï¼š`spider/tender_spider.py`
- çŠ¶æ€ï¼šå·²é‡æ„ï¼Œç»§æ‰¿ `BaseSpider`
- å…¼å®¹æ€§ï¼šå®Œå…¨å‘åå…¼å®¹

## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### è¿è¡Œæ‰€æœ‰çˆ¬è™«
```python
from spider import SpiderManager

# è¿è¡Œæ‰€æœ‰å¯ç”¨çš„çˆ¬è™«
projects = SpiderManager.run_all_spiders(days_before=7)

# è¿è¡ŒæŒ‡å®šå¹³å°
projects = SpiderManager.run_all_spiders(
    days_before=7,
    enabled_platforms=["zhejiang", "hangzhou"]
)
```

### è¿è¡Œå•ä¸ªçˆ¬è™«
```python
from spider import SpiderManager

spider = SpiderManager.create_spider(
    platform_code="zhejiang",
    daily_limit=50,
    days_before=7
)
projects = spider.run()
```

### å‘åå…¼å®¹ï¼ˆç°æœ‰ä»£ç ï¼‰
```python
# ç°æœ‰ä»£ç ä»ç„¶å¯ç”¨
from spider.tender_spider import ZheJiangTenderSpider, run_all_spiders

spider = ZheJiangTenderSpider(daily_limit=10, days_before=7)
projects = spider.run()

# æˆ–ä½¿ç”¨ç»Ÿä¸€å‡½æ•°
projects = run_all_spiders(days_before=7)
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å¹³å°ä»£ç å”¯ä¸€æ€§**ï¼š`PLATFORM_CODE` å¿…é¡»å”¯ä¸€
2. **æ¥å£å®ç°**ï¼šå¿…é¡»å®ç° `run()` æ–¹æ³•
3. **é”™è¯¯å¤„ç†**ï¼šæ¯ä¸ªå¹³å°åº”ç‹¬ç«‹å¤„ç†é”™è¯¯
4. **æ—¥å¿—è®°å½•**ï¼šä½¿ç”¨ç»Ÿä¸€çš„æ—¥å¿—æ¥å£
5. **æ•°æ®æ ¼å¼**ï¼šé¡¹ç›®æ•°æ®å¿…é¡»ç¬¦åˆ `save_project` å‡½æ•°çš„è¦æ±‚

## ğŸ“ é›†æˆæ£€æŸ¥æ¸…å•

æ·»åŠ æ–°å¹³å°æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

- [ ] åˆ›å»ºå¹³å°ç›®å½•å’Œæ–‡ä»¶ç»“æ„
- [ ] å®ç° `execute_request` è¯·æ±‚å¤„ç†å‡½æ•°
- [ ] åˆ›å»ºå¹³å°é…ç½®æ–‡ä»¶ `config.py`
- [ ] å®ç°çˆ¬è™«ç±»ï¼Œç»§æ‰¿ `BaseSpider`
- [ ] å®ç° `run()` æ–¹æ³•
- [ ] å®ç°é¡¹ç›®æ•°æ®è§£ææ–¹æ³•
- [ ] å®ç°æ–‡ä»¶ä¸‹è½½é€»è¾‘ï¼ˆå¦‚éœ€è¦ï¼‰
- [ ] æ³¨å†Œçˆ¬è™«åˆ° `SpiderManager`
- [ ] æ›´æ–° `spider/__init__.py` å¯¼å…¥
- [ ] ç¼–å†™å•å…ƒæµ‹è¯•
- [ ] æ›´æ–°æ–‡æ¡£

## ğŸ” è·å–å¸®åŠ©

1. **æŸ¥çœ‹è¯¦ç»†æ–¹æ¡ˆ**ï¼šé˜…è¯» `docs/SPIDER_EXTENSION_PLAN.md`
2. **æŸ¥çœ‹ä»£ç æ¨¡æ¿**ï¼šé˜…è¯» `docs/PLATFORM_INTEGRATION_TEMPLATE.md`
3. **æŸ¥çœ‹å¿«é€ŸæŒ‡å—**ï¼šé˜…è¯» `docs/SPIDER_EXTENSION_QUICK_START.md`
4. **å‚è€ƒç°æœ‰å®ç°**ï¼šæŸ¥çœ‹ `spider/tender_spider.py`ï¼ˆæµ™æ±Ÿçœçˆ¬è™«ï¼‰

## ğŸ“ˆ åç»­æ‰©å±•

æœ¬æ–¹æ¡ˆæ”¯æŒä»¥ä¸‹æ‰©å±•æ–¹å‘ï¼š

1. **å¼‚æ­¥çˆ¬å–**ï¼šä½¿ç”¨ `asyncio` å’Œ `aiohttp`
2. **åˆ†å¸ƒå¼çˆ¬å–**ï¼šæ”¯æŒå¤šè¿›ç¨‹/å¤šæœºåˆ†å¸ƒå¼
3. **é…ç½®ä¸­å¿ƒ**ï¼šå°†å¹³å°é…ç½®ç§»è‡³æ•°æ®åº“
4. **ç›‘æ§å‘Šè­¦**ï¼šæ·»åŠ è¿è¡ŒçŠ¶æ€ç›‘æ§
5. **çˆ¬è™«è°ƒåº¦**ï¼šå®ç°æ›´çµæ´»çš„è°ƒåº¦ç­–ç•¥

---

**æœ€åæ›´æ–°**ï¼š2024å¹´
**ç‰ˆæœ¬**ï¼š1.0
**çŠ¶æ€**ï¼šå·²å®ŒæˆåŸºç¡€æ¶æ„ï¼Œæ”¯æŒæ‰©å±•æ–°å¹³å°
